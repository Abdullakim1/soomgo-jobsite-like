(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,6085,e=>{"use strict";e.s(["Headers",()=>r,"Request",()=>s,"Response",()=>i,"default",()=>a,"fetch",()=>l]);var t="undefined"!=typeof self?self:"undefined"!=typeof window?window:e.g;let l=t.fetch,a=t.fetch.bind(t),r=t.Headers,s=t.Request,i=t.Response},27146,e=>{"use strict";e.s(["default",()=>s],27146);var t=e.i(43476),l=e.i(71645),a=e.i(11795);function r(e){let{uid:r,url:s,size:i,onUpload:o}=e,d=(0,a.createClient)(),[n,u]=(0,l.useState)(s),[c,f]=(0,l.useState)(!1);(0,l.useEffect)(()=>{async function e(e){try{let{data:t,error:l}=await d.storage.from("avatars").download(e);if(l)throw l;let a=URL.createObjectURL(t);u(a)}catch(e){console.log("Error downloading image: ",e)}}s&&e(s)},[s,d]);let m=async e=>{try{if(f(!0),!e.target.files||0===e.target.files.length)throw Error("You must select an image to upload.");let t=e.target.files[0],l=t.name.split(".").pop(),a="".concat(r,"-").concat(Math.random(),".").concat(l),{error:s}=await d.storage.from("avatars").upload(a,t);if(s)throw s;o(a)}catch(e){alert("Error uploading avatar!")}finally{f(!1)}};return(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[n?(0,t.jsx)("img",{src:n,alt:"Avatar",className:"rounded-full",style:{height:i,width:i}}):(0,t.jsx)("div",{className:"rounded-full bg-gray-200",style:{height:i,width:i}}),(0,t.jsxs)("div",{style:{width:i},children:[(0,t.jsx)("label",{className:"button primary block",htmlFor:"single",children:c?"Uploading ...":"Upload"}),(0,t.jsx)("input",{style:{visibility:"hidden",position:"absolute"},type:"file",id:"single",accept:"image/*",onChange:m,disabled:c})]})]})}function s(e){let{user:s}=e,i=(0,a.createClient)(),[o,d]=(0,l.useState)(!0),[n,u]=(0,l.useState)(null),[c,f]=(0,l.useState)(null),[m,h]=(0,l.useState)(null),g=(0,l.useCallback)(async()=>{try{d(!0);let{data:e,error:t,status:l}=await i.from("profiles").select("full_name, website, avatar_url").eq("id",null==s?void 0:s.id).single();if(t&&406!==l)throw t;e&&(u(e.full_name),f(e.website),h(e.avatar_url))}catch(e){alert("Error loading user data!")}finally{d(!1)}},[s,i]);async function p(e){let{fullname:t,website:l,avatar_url:a}=e;try{d(!0);let{error:e}=await i.from("profiles").upsert({id:null==s?void 0:s.id,full_name:t,website:l,avatar_url:a,updated_at:new Date().toISOString()});if(e)throw e;alert("Profile updated!")}catch(e){alert("Error updating the data!")}finally{d(!1)}}return(0,l.useEffect)(()=>{g()},[s,g]),(0,t.jsxs)("div",{className:"w-full max-w-lg p-8 space-y-8 bg-white rounded-lg shadow-md",children:[(0,t.jsx)(r,{uid:s.id,url:m,size:150,onUpload:e=>{h(e),p({fullname:n,website:c,avatar_url:e})}}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"email",className:"text-sm font-medium text-gray-700",children:"Email"}),(0,t.jsx)("input",{id:"email",type:"text",value:null==s?void 0:s.email,disabled:!0,className:"w-full px-3 py-2 mt-1 bg-gray-100 border border-gray-300 rounded-md"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"fullName",className:"text-sm font-medium text-gray-700",children:"Full Name"}),(0,t.jsx)("input",{id:"fullName",type:"text",value:n||"",onChange:e=>u(e.target.value),className:"w-full px-3 py-2 mt-1 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"website",className:"text-sm font-medium text-gray-700",children:"Website"}),(0,t.jsx)("input",{id:"website",type:"url",value:c||"",onChange:e=>f(e.target.value),className:"w-full px-3 py-2 mt-1 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"})]}),(0,t.jsx)("div",{children:(0,t.jsx)("button",{className:"w-full px-4 py-2 font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",onClick:()=>p({fullname:n,website:c,avatar_url:m}),disabled:o,children:o?"Loading ...":"Update"})})]})]})}},11737,e=>{e.v(e=>Promise.resolve().then(()=>e(6085)))}]);