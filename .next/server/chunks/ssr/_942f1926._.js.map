{"version":3,"sources":["turbopack:///[project]/src/app/jobs/[id]/applicants/applicant-actions.tsx"],"sourcesContent":["'use client';\n\nimport { useState } from 'react';\nimport { createClient } from '@/lib/supabase/client';\n\nexport default function ApplicantActions({ application }: { application: { id: number, status: string } }) {\n  const supabase = createClient();\n  const [currentStatus, setCurrentStatus] = useState(application.status);\n  const [loading, setLoading] = useState(false);\n\n  const updateStatus = async (newStatus: 'accepted' | 'rejected') => {\n    setLoading(true);\n    try {\n      if (newStatus === 'accepted') {\n        // Use the secure API route to handle acceptance and contract creation\n        const response = await fetch('/api/applications/accept', {\n          method: 'POST',\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify({ applicationId: application.id }),\n        });\n\n        if (!response.ok) {\n          const errorData = await response.text();\n          throw new Error(errorData || 'Failed to accept application.');\n        }\n\n      } else {\n        // 'rejected' can still be a direct update\n        const { error } = await supabase\n          .from('job_applications')\n          .update({ status: newStatus })\n          .eq('id', application.id);\n\n        if (error) throw error;\n      }\n\n      setCurrentStatus(newStatus);\n\n    } catch (error: any) {\n      console.error('Error updating application status:', error);\n      alert(`Failed to update application status: ${error.message}`);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  if (currentStatus !== 'pending') {\n    return <p className={`font-semibold capitalize ${currentStatus === 'accepted' ? 'text-green-600' : 'text-red-600'}`}>{currentStatus}</p>;\n  }\n\n  return (\n    <div className=\"flex gap-2\">\n      <button\n        onClick={() => updateStatus('accepted')}\n        disabled={loading}\n        className=\"px-3 py-1 text-sm font-medium text-white bg-green-600 rounded-md hover:bg-green-700 disabled:bg-gray-400\"\n      >\n        Accept\n      </button>\n      <button\n        onClick={() => updateStatus('rejected')}\n        disabled={loading}\n        className=\"px-3 py-1 text-sm font-medium text-white bg-red-600 rounded-md hover:bg-red-700 disabled:bg-gray-400\"\n      >\n        Reject\n      </button>\n    </div>\n  );\n}\n"],"names":[],"mappings":"+EAEA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAEe,SAAS,EAAiB,aAAE,CAAW,CAAmD,EACvG,IAAM,EAAW,CAAA,EAAA,EAAA,YAAA,AAAY,IACvB,CAAC,EAAe,EAAiB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,EAAY,MAAM,EAC/D,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GAEjC,EAAe,MAAO,IAC1B,GAAW,GACX,GAAI,CACF,GAAkB,aAAd,EAA0B,CAE5B,IAAM,EAAW,MAAM,MAAM,2BAA4B,CACvD,OAAQ,OACR,QAAS,CAAE,eAAgB,kBAAmB,EAC9C,KAAM,KAAK,SAAS,CAAC,CAAE,cAAe,EAAY,EAAE,AAAC,EACvD,GAEA,GAAI,CAAC,EAAS,EAAE,CAAE,CAChB,IAAM,EAAY,MAAM,EAAS,IAAI,EACrC,OAAM,AAAI,MAAM,GAAa,gCAC/B,CAEF,KAAO,CAEL,GAAM,OAAE,CAAK,CAAE,CAAG,MAAM,EACrB,IAAI,CAAC,oBACL,MAAM,CAAC,CAAE,OAAQ,CAAU,GAC3B,EAAE,CAAC,KAAM,EAAY,EAAE,EAE1B,GAAI,EAAO,MAAM,CACnB,CAEA,EAAiB,EAEnB,CAAE,MAAO,EAAY,CACnB,QAAQ,KAAK,CAAC,qCAAsC,GACpD,MAAM,CAAC,qCAAqC,EAAE,EAAM,OAAO,CAAA,CAAE,CAC/D,QAAU,CACR,GAAW,EACb,CACF,QAEA,AAAsB,WAAW,CAA7B,EACK,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAW,CAAC,yBAAyB,EAAoB,aAAlB,EAA+B,iBAAmB,eAAA,CAAgB,UAAG,IAItH,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,uBACb,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,QAAS,IAAM,EAAa,YAC5B,SAAU,EACV,UAAU,oHACX,WAGD,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,QAAS,IAAM,EAAa,YAC5B,SAAU,EACV,UAAU,gHACX,aAKP"}