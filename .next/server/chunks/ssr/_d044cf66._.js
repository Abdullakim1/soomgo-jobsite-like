module.exports=[36464,a=>{"use strict";a.s(["default",()=>f],36464);var b=a.i(87924),c=a.i(72131),d=a.i(95445);function e({uid:a,url:e,size:f,onUpload:g}){let h=(0,d.createClient)(),[i,j]=(0,c.useState)(e),[k,l]=(0,c.useState)(!1);(0,c.useEffect)(()=>{async function a(a){try{let{data:b,error:c}=await h.storage.from("avatars").download(a);if(c)throw c;let d=URL.createObjectURL(b);j(d)}catch(a){console.log("Error downloading image: ",a)}}e&&a(e)},[e,h]);let m=async b=>{try{if(l(!0),!b.target.files||0===b.target.files.length)throw Error("You must select an image to upload.");let c=b.target.files[0],d=c.name.split(".").pop(),e=`${a}-${Math.random()}.${d}`,{error:f}=await h.storage.from("avatars").upload(e,c);if(f)throw f;g(e)}catch(a){alert("Error uploading avatar!")}finally{l(!1)}};return(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[i?(0,b.jsx)("img",{src:i,alt:"Avatar",className:"rounded-full",style:{height:f,width:f}}):(0,b.jsx)("div",{className:"rounded-full bg-gray-200",style:{height:f,width:f}}),(0,b.jsxs)("div",{style:{width:f},children:[(0,b.jsx)("label",{className:"button primary block",htmlFor:"single",children:k?"Uploading ...":"Upload"}),(0,b.jsx)("input",{style:{visibility:"hidden",position:"absolute"},type:"file",id:"single",accept:"image/*",onChange:m,disabled:k})]})]})}function f({user:a}){let f=(0,d.createClient)(),[g,h]=(0,c.useState)(!0),[i,j]=(0,c.useState)(null),[k,l]=(0,c.useState)(null),[m,n]=(0,c.useState)(null),o=(0,c.useCallback)(async()=>{try{h(!0);let{data:b,error:c,status:d}=await f.from("profiles").select("full_name, website, avatar_url").eq("id",a?.id).single();if(c&&406!==d)throw c;b&&(j(b.full_name),l(b.website),n(b.avatar_url))}catch(a){alert("Error loading user data!")}finally{h(!1)}},[a,f]);async function p({fullname:b,website:c,avatar_url:d}){try{h(!0);let{error:e}=await f.from("profiles").upsert({id:a?.id,full_name:b,website:c,avatar_url:d,updated_at:new Date().toISOString()});if(e)throw e;alert("Profile updated!")}catch(a){alert("Error updating the data!")}finally{h(!1)}}return(0,c.useEffect)(()=>{o()},[a,o]),(0,b.jsxs)("div",{className:"w-full max-w-lg p-8 space-y-8 bg-white rounded-lg shadow-md",children:[(0,b.jsx)(e,{uid:a.id,url:m,size:150,onUpload:a=>{n(a),p({fullname:i,website:k,avatar_url:a})}}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"email",className:"text-sm font-medium text-gray-700",children:"Email"}),(0,b.jsx)("input",{id:"email",type:"text",value:a?.email,disabled:!0,className:"w-full px-3 py-2 mt-1 bg-gray-100 border border-gray-300 rounded-md"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"fullName",className:"text-sm font-medium text-gray-700",children:"Full Name"}),(0,b.jsx)("input",{id:"fullName",type:"text",value:i||"",onChange:a=>j(a.target.value),className:"w-full px-3 py-2 mt-1 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"website",className:"text-sm font-medium text-gray-700",children:"Website"}),(0,b.jsx)("input",{id:"website",type:"url",value:k||"",onChange:a=>l(a.target.value),className:"w-full px-3 py-2 mt-1 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"})]}),(0,b.jsx)("div",{children:(0,b.jsx)("button",{className:"w-full px-4 py-2 font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",onClick:()=>p({fullname:i,website:k,avatar_url:m}),disabled:g,children:g?"Loading ...":"Update"})})]})]})}},59789,a=>{a.v(a=>Promise.resolve().then(()=>a(23952)))}];

//# sourceMappingURL=_d044cf66._.js.map